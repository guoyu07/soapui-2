{
  if (StringUtils.isNullOrEmpty(profile.getAccessToken())) {
    StringToStringsMap requestHeaders=request.getRequestHeaders();
    requestHeaders.remove(OAuth.HeaderType.AUTHORIZATION);
    request.setRequestHeaders(requestHeaders);
    return;
  }
  String uri=request.getPath();
  OAuthBearerClientRequest oAuthBearerClientRequest=new OAuthBearerClientRequest(uri).setAccessToken(profile.getAccessToken());
  try {
switch (profile.getAccessTokenPosition()) {
case QUERY:
      appendAccessTokenToQuery(request,oAuthBearerClientRequest);
    break;
case BODY:
  appendAccessTokenToBody(request,oAuthBearerClientRequest);
break;
case HEADER:
default :
appendAccessTokenToHeader(request,oAuthBearerClientRequest);
break;
}
}
 catch (OAuthSystemException e) {
SoapUI.logError(e);
}
}
