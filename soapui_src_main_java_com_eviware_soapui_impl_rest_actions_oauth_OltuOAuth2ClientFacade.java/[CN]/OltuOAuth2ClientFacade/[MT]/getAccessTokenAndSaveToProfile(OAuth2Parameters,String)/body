{
  if (authorizationCode != null) {
    try {
      parameters.receivedAuthorizationCode();
      OAuthClientRequest accessTokenRequest=OAuthClientRequest.tokenLocation(parameters.accessTokenUri).setGrantType(GrantType.AUTHORIZATION_CODE).setClientId(parameters.clientId).setClientSecret(parameters.clientSecret).setRedirectURI(parameters.redirectUri).setCode(authorizationCode).buildBodyMessage();
      OAuthToken token=null;
switch (parameters.accessTokenRetrievalLocation) {
case BODY_JSON:
        token=getOAuthClient().accessToken(accessTokenRequest,OAuthJSONAccessTokenResponse.class).getOAuthToken();
      break;
case BODY_URL_ENCODED_FORM:
    token=getOAuthClient().accessToken(accessTokenRequest,GitHubTokenResponse.class).getOAuthToken();
  break;
default :
break;
}
if (token != null && token.getAccessToken() != null) {
parameters.setAccessTokenInProfile(token.getAccessToken());
parameters.setRefreshTokenInProfile(token.getRefreshToken());
browserFacade.close();
}
}
 catch (OAuthSystemException e) {
SoapUI.logError(e);
}
catch (OAuthProblemException e) {
SoapUI.logError(e);
}
}
}
