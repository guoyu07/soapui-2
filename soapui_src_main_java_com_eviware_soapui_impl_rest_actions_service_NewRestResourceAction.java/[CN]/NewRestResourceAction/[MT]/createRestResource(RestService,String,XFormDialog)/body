{
  RestResource possibleParent=null;
  String strippedPath=null;
  for (  String endpoint : service.getEndpoints()) {
    if (path.startsWith(endpoint + "/")) {
      strippedPath=path.substring(endpoint.length());
    }
  }
  if (strippedPath == null) {
    strippedPath=path.startsWith(service.getBasePath()) ? path : service.getBasePath() + path;
  }
  for (  RestResource resource : service.getAllResources()) {
    if (strippedPath.startsWith(resource.getFullPath())) {
      int c=0;
      for (; c < resource.getChildResourceCount(); c++) {
        if (strippedPath.startsWith(resource.getChildResourceAt(c).getFullPath())) {
          break;
        }
      }
      if (c != resource.getChildResourceCount()) {
        continue;
      }
      possibleParent=resource;
      break;
    }
  }
  if (possibleParent != null && UISupport.confirm("Create resource as child to [" + possibleParent.getName() + "]",CONFIRM_DIALOG_TITLE)) {
    if (strippedPath.length() > 0 && possibleParent.getFullPath().length() > 0) {
      strippedPath=strippedPath.substring(possibleParent.getFullPath().length() + 1);
    }
    return possibleParent.addNewChildResource(extractNameFromPath(strippedPath),strippedPath);
  }
 else {
    return service.addNewResource(extractNameFromPath(path),path);
  }
}
