{
  RestParamsPropertyHolder params=request.getParams();
  StringBuffer query=request.isPostQueryString() || "multipart/form-data".equals(request.getMediaType()) ? null : new StringBuffer();
  for (int c=0; c < params.getPropertyCount(); c++) {
    RestParamProperty param=params.getPropertyAt(c);
    String value=param.getValue();
    List<String> valueParts=splitMultipleParameters(value,request.getMultiValueDelimiter());
    if ((!StringUtils.hasContent(value) && !param.getRequired()) || param.getStyle() != ParameterStyle.QUERY)     continue;
    if (query != null && valueParts != null) {
      for (      String valuePart : valueParts) {
        if (query.length() > 0)         query.append('&');
        query.append(param.getName());
        query.append('=');
        if (StringUtils.hasContent(valuePart))         query.append(valuePart);
      }
    }
  }
  String queryString="";
  if (query != null && query.length() > 0)   queryString+="?" + query.toString();
  return queryString;
}
