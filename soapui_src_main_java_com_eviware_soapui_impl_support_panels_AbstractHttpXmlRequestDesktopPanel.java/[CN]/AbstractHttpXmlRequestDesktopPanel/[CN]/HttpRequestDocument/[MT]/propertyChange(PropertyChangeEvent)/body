{
  if (!updating) {
    try {
      updating=true;
      if (evt.getPropertyName().equals(Request.REQUEST_PROPERTY)) {
        fireContentChanged(getDocumentContent().withContent((String)evt.getOldValue()),getDocumentContent().withContent((String)evt.getNewValue()));
      }
      if (evt.getPropertyName().equals(Request.MEDIA_TYPE)) {
        fireContentChanged(getDocumentContent().withContentType((String)evt.getOldValue()),getDocumentContent().withContentType((String)evt.getNewValue()));
      }
    }
  finally {
      updating=false;
    }
  }
}
