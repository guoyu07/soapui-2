{
  if (!updating) {
    updating=true;
    if (seemsToBeJsonContentType(getRequest().getMediaType()) && XmlUtils.seemsToBeXml(xml)) {
      JSON json=new JsonXmlSerializer().read(xml);
      request.setRequestContent(json.toString(3,0));
    }
 else {
      request.setRequestContent(xml);
    }
    updating=false;
  }
}
