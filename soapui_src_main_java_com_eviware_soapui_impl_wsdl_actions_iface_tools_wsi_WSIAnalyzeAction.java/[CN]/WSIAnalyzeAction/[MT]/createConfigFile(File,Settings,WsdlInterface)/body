{
  ConfigurationDocument configDoc=ConfigurationDocument.Factory.newInstance();
  Configuration config=configDoc.addNewConfiguration();
  config.setVerbose(settings.getBoolean(WSISettings.VERBOSE));
  AssertionResults results=config.addNewAssertionResults();
  results.setType(AssertionResults.Type.Enum.forString(ALL_RESULT_TYPE));
  results.setMessageEntry(settings.getBoolean(WSISettings.MESSAGE_ENTRY));
  results.setFailureMessage(settings.getBoolean(WSISettings.FAILURE_MESSAGE));
  results.setAssertionDescription(settings.getBoolean(WSISettings.ASSERTION_DESCRIPTION));
  ReportFile report=config.addNewReportFile();
  report.setLocation(reportFile.getAbsolutePath());
  report.setReplace(true);
  AddStyleSheet stylesheet=report.addNewAddStyleSheet();
  stylesheet.setHref(PROFILES_DIR_RELATED_PATH + profile);
  stylesheet.setType("text/xsl");
  stylesheet.setAlternate(false);
  config.setTestAssertionsFile(PROFILES_DIR_RELATED_PATH + profile);
  LogFile logFile=config.addNewLogFile();
  logFile.setCorrelationType(LogFile.CorrelationType.Enum.forString(settings.getString(WSISettings.CORRELATION_TYPE,WSISettings.ENDPOINT_LOG_FILE_CORRELATION_TYPE)));
  logFile.setStringValue("log-sample.xml");
  config.setLogFile(logFile);
  WsdlReference wsdlRef=config.addNewWsdlReference();
  StringToStringMap values=new StringToStringMap();
  values.put(WSDL,iface.getDefinition());
  values.put(CACHED_WSDL,Boolean.toString(iface.isCached()));
  wsdlRef.setWsdlURI(getWsdlUrl(values,iface));
  WsdlElementReference wsdlElement=wsdlRef.addNewWsdlElement();
  wsdlElement.setType(WsdlElementType.BINDING);
  wsdlElement.setStringValue(iface.getBindingName().getLocalPart());
  wsdlElement.setNamespace(iface.getBindingName().getNamespaceURI());
  return configDoc;
}
