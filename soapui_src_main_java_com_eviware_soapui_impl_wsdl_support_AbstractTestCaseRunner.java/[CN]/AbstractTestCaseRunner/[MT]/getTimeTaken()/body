{
  long sum=0;
  if (((WsdlTestRunContext)this.getRunContext()).getCurrentStep() != null && ((WsdlTestRunContext)this.getRunContext()).getCurrentStepIndex() != testStepResults.toArray().length - 1) {
    sum=System.currentTimeMillis() - currentStepStartTime;
  }
 else {
    for (    TestStepResult testStepResult : testStepResults) {
      if (testStepResult != null) {
        sum+=testStepResult.getTimeTaken();
      }
    }
  }
  return sum;
}
