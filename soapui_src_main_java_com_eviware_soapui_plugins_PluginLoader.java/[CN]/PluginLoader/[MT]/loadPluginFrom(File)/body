{
  JarClassLoader jarClassLoader=new JarClassLoader(pluginFile,ClassLoader.getSystemClassLoader());
  Reflections jarFileScanner=new Reflections(new ConfigurationBuilder().setUrls(jarClassLoader.getURLs()).addClassLoader(jarClassLoader));
  Set<Class<?>> pluginClasses=jarFileScanner.getTypesAnnotatedWith(PluginConfiguration.class);
  if (pluginClasses.isEmpty()) {
    log.warn("No plugin classes found in JAR file " + pluginFile);
    return null;
  }
 else   if (pluginClasses.size() == 1) {
    return loadPlugin(pluginClasses.iterator().next());
  }
 else {
    throw new InvalidPluginException("Multiple plugin classes found in " + pluginFile + ": "+ pluginClasses);
  }
}
