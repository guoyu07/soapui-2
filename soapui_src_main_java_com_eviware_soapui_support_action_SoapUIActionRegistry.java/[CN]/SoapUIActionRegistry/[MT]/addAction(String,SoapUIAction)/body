{
  actions.put(soapuiActionID,action);
  Class<? extends SoapUIAction> actionClass=action.getClass();
  ActionConfiguration configuration=actionClass.getAnnotation(ActionConfiguration.class);
  if (configuration != null) {
    SoapUIActionGroup targetGroup=findGroupWithClass(configuration.actionGroup());
    DefaultActionMapping mapping=new DefaultActionMapping(action.getId(),configuration.keyStroke(),configuration.iconPath(),configuration.defaultAction(),null);
    mapping.setDescription(configuration.description());
    int insertIndex=-1;
    if (StringUtils.hasContent(configuration.beforeAction())) {
      insertIndex=targetGroup.getMappingIndex(configuration.beforeAction());
    }
 else     if (StringUtils.hasContent(configuration.afterAction())) {
      insertIndex=targetGroup.getMappingIndex(configuration.afterAction()) + 1;
    }
    targetGroup.addMapping(action.getId(),insertIndex,mapping);
  }
}
