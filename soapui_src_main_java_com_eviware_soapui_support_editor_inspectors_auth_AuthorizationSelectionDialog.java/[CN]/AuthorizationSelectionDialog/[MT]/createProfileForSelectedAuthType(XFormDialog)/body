{
  final String authType=dialog.getValue(AuthorizationTypeForm.AUTHORIZATION_TYPE);
  if (CredentialsConfig.AuthType.O_AUTH_2.toString().equals(authType)) {
    final String profileName=dialog.getValue(AuthorizationTypeForm.OAUTH2_PROFILE_NAME_FIELD);
    if (getOAuth2ProfileContainer().getOAuth2ProfileNameList().contains(profileName)) {
      UISupport.showErrorMessage("There is already a profile named '" + profileName + "'");
      return;
    }
    final OAuth2Profile profile=getOAuth2ProfileContainer().addNewOAuth2Profile(profileName);
    request.setSelectedAuthProfile(profile.getName());
  }
 else {
    request.addBasicAuthenticationProfile(authType);
    request.setSelectedAuthProfile(authType);
  }
}
