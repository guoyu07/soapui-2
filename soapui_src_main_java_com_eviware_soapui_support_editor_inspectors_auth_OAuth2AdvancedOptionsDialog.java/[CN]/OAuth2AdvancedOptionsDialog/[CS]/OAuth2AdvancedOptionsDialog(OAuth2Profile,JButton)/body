{
  this.refreshAccessTokenButton=refreshAccessTokenButton;
  expirationTimeComponent=new ExpirationTimeChooser(profile);
  XFormDialog dialog=ADialogBuilder.buildDialog(Form.class);
  dialog.getFormField(Form.ACCESS_TOKEN_EXPIRATION_TIME).setProperty("component",expirationTimeComponent);
  setAccessTokenOptions(profile,dialog);
  setRefreshAccessTokenOptions(profile,dialog);
  if (dialog.show()) {
    String accessTokenPosition=dialog.getValue(Form.ACCESS_TOKEN_POSITION);
    profile.setAccessTokenPosition(AccessTokenPosition.valueOf(accessTokenPosition));
    String refreshAccessTokenMethod=dialog.getValue(Form.AUTOMATIC_ACCESS_TOKEN_REFRESH);
    profile.setRefreshAccessTokenMethod(valueOf(refreshAccessTokenMethod));
    long manualExpirationTime=expirationTimeComponent.getAccessTokenExpirationTimeInSeconds();
    if (manualExpirationTime != -1) {
      profile.setUseManualAccessTokenExpirationTime(true);
      profile.setManualAccessTokenExpirationTime(manualExpirationTime);
    }
 else {
      profile.setUseManualAccessTokenExpirationTime(false);
    }
    enableRefreshAccessTokenButton(profile);
  }
}
