{
  Project project=ModelSupport.getModelItemProject(request);
  CredentialsConfig.AuthType.Enum authType=CredentialsConfig.AuthType.Enum.forString(request.getAuthType());
  for (  Interface iface : project.getInterfaceList()) {
    if (iface instanceof RestService) {
      for (      RestResource restResource : ((RestService)iface).getAllResources()) {
        for (        RestMethod restMethod : restResource.getRestMethodList()) {
          for (          RestRequest restRequest : restMethod.getRequestList()) {
            if (ObjectUtils.equals(restRequest.getAuthType(),request.getAuthType()) && ObjectUtils.equals(restRequest.getSelectedAuthProfile(),profileOldName)) {
              restRequest.setSelectedAuthProfileAndAuthType(newName,authType);
            }
          }
        }
      }
    }
  }
  for (  TestSuite testSuite : project.getTestSuiteList()) {
    for (    TestCase testCase : testSuite.getTestCaseList()) {
      for (      RestTestRequestStep restTestRequestStep : testCase.getTestStepsOfType(RestTestRequestStep.class)) {
        if (ObjectUtils.equals(restTestRequestStep.getTestRequest().getAuthType(),request.getAuthType()) && ObjectUtils.equals(restTestRequestStep.getTestRequest().getSelectedAuthProfile(),profileOldName)) {
          restTestRequestStep.getTestRequest().setSelectedAuthProfileAndAuthType(newName,authType);
        }
      }
    }
  }
}
