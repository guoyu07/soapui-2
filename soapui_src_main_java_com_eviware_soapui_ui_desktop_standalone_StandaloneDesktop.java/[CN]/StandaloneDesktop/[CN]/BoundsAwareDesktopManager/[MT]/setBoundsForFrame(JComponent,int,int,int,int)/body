{
  boolean hasResized=(desktopPanel.getWidth() != newWidth || desktopPanel.getHeight() != newHeight);
  if (outsideDesktop(desktopPanel,newX,newY)) {
    Container desktop=desktopPanel.getParent();
    Dimension desktopSize=desktop.getSize();
    int boundedX=(int)Math.min(Math.max(0,newX),desktopSize.getWidth());
    int boundedY=(int)Math.min(Math.max(0,newY),desktopSize.getHeight());
    desktopPanel.setBounds(boundedX,boundedY,newWidth,newHeight);
  }
 else {
    desktopPanel.setBounds(newX,newY,newWidth,newHeight);
  }
  if (hasResized) {
    desktopPanel.validate();
  }
}
