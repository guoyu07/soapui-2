{
  String password=settings.getString(ProxySettings.PASSWORD,null);
  boolean isProxyPasswordShadowed=Boolean.parseBoolean(settings.getString(ProxySettings.ENABLE_SHADOWING,null));
  String shadowProxyPassword=settings.getString(ProxySettings.SHADOW_PASSWORD,null);
  if (isProxyPasswordShadowed) {
    if (shadowProxyPassword == null || shadowProxyPassword.length() == 0) {
      UISupport.showErrorMessage("Proxy password decryption is enabled but password is missing. Proxy password will not be decrypted.");
    }
 else {
      try {
        byte[] decryptedData=OpenSSL.decrypt("des3",settings.getClass().toString().toCharArray(),shadowProxyPassword.getBytes("UTF-8"));
        shadowProxyPassword=new String(decryptedData,"UTF-8");
        decryptedData=OpenSSL.decrypt("des3",shadowProxyPassword.toCharArray(),password.getBytes("UTF-8"));
        password=new String(decryptedData,"UTF-8");
      }
 catch (      UnsupportedEncodingException e) {
        log.error("Decryption error",e);
      }
catch (      IOException e) {
        log.error("Decryption error",e);
      }
catch (      GeneralSecurityException e) {
        log.error("Decryption error",e);
      }
    }
  }
  settings.setString(ProxySettings.SHADOW_PASSWORD,shadowProxyPassword);
  settings.setString(ProxySettings.PASSWORD,password);
}
