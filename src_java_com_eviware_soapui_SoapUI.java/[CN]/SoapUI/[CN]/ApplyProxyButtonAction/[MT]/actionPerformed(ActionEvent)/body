{
  if (isApplyProxy()) {
    applyProxy(false);
    applyProxyButton.setIcon(UISupport.createImageIcon(PROXY_DISABLED_ICON));
  }
 else {
    if (StringUtils.isNullOrEmpty(SoapUI.getSettings().getString(ProxySettings.HOST,"")) || StringUtils.isNullOrEmpty(SoapUI.getSettings().getString(ProxySettings.PORT,""))) {
      SoapUIPreferencesAction.getInstance().show(SoapUIPreferencesAction.PROXY_SETTINGS);
      if (!StringUtils.isNullOrEmpty(SoapUI.getSettings().getString(ProxySettings.HOST,"")) && !StringUtils.isNullOrEmpty(SoapUI.getSettings().getString(ProxySettings.PORT,""))) {
        applyProxy(true);
        applyProxyButton.setIcon(UISupport.createImageIcon(PROXY_ENABLED_ICON));
      }
    }
 else {
      applyProxy(true);
      applyProxyButton.setIcon(UISupport.createImageIcon("PROXY_ENABLED_ICON"));
    }
  }
}
