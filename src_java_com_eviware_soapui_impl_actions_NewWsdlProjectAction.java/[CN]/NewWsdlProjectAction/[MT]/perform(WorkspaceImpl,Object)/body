{
  if (dialog == null) {
    dialog=ADialogBuilder.buildDialog(Form.class);
    dialog.setValue(Form.CREATEREQUEST,Boolean.toString(true));
    dialog.getFormField(Form.INITIALWSDL).addFormFieldListener(new XFormFieldListener(){
      public void valueChanged(      XFormField sourceField,      String newValue,      String oldValue){
        dialog.getFormField(Form.CREATEREQUEST).setEnabled(newValue.trim().length() > 0);
        dialog.getFormField(Form.GENERATEMOCKSERVICE).setEnabled(newValue.trim().length() > 0);
        dialog.getFormField(Form.GENERATETESTSUITE).setEnabled(newValue.trim().length() > 0);
        dialog.getFormField(Form.ADDRESTSERVICE).setEnabled(newValue.trim().length() == 0);
      }
    }
);
  }
 else {
    dialog.setValue(Form.PROJECTNAME,"");
    dialog.setValue(Form.INITIALWSDL,"");
    dialog.getFormField(Form.CREATEREQUEST).setEnabled(false);
    dialog.getFormField(Form.GENERATEMOCKSERVICE).setEnabled(false);
    dialog.getFormField(Form.GENERATETESTSUITE).setEnabled(false);
    dialog.getFormField(Form.ADDRESTSERVICE).setEnabled(false);
  }
  while (dialog.show()) {
    try {
      String projectName=dialog.getValue(Form.PROJECTNAME).trim();
      if (projectName.length() == 0) {
        UISupport.showErrorMessage(messages.get("MissingProjectNameError"));
      }
 else {
        WsdlProject project=workspace.createProject(projectName,null);
        if (project != null) {
          UISupport.select(project);
          String url=dialog.getValue(Form.INITIALWSDL).trim();
          if (url.length() > 0) {
            if (new File(url).exists())             url=new File(url).toURI().toURL().toString();
            if (url.toUpperCase().endsWith("WADL"))             importWadl(project,url);
 else             importWsdl(project,url);
          }
 else           if (dialog.getBooleanValue(Form.ADDRESTSERVICE)) {
            SoapUI.getActionRegistry().getAction(NewRestServiceAction.SOAPUI_ACTION_ID).perform(project,project);
          }
          break;
        }
      }
    }
 catch (    Exception ex) {
      UISupport.showErrorMessage(ex);
    }
  }
}
