{
  if (dialog == null) {
    dialog=ADialogBuilder.buildDialog(Form.class);
    dialog.getFormField(Form.RESOURCENAME).addFormFieldValidator(new RequiredValidator());
    dialog.getFormField(Form.EXTRACTPARAMS).setProperty("action",new ExtractParamsAction());
  }
 else {
    dialog.setValue(Form.RESOURCENAME,"");
    dialog.setValue(Form.RESOURCEPATH,"");
  }
  params=new XmlBeansRestParamsTestPropertyHolder(service,RestParametersConfig.Factory.newInstance());
  if (param instanceof URL) {
    String path=WadlUtils.extractParams((URL)param,params);
    dialog.setValue(Form.RESOURCEPATH,path);
    String[] items=path.split("/");
    if (items.length > 0) {
      dialog.setValue(Form.RESOURCENAME,items[items.length - 1]);
    }
    if (paramsTable != null)     paramsTable.refresh();
  }
  paramsTable=new JWadlParamsTable(params);
  dialog.getFormField(Form.PARAMSTABLE).setProperty("component",paramsTable);
  if (dialog.show()) {
    String path=dialog.getValue(Form.RESOURCEPATH);
    try {
      URL url=new URL(path);
      path=url.getPath();
    }
 catch (    MalformedURLException e) {
    }
    RestResource resource=service.addNewResource(dialog.getValue(Form.RESOURCENAME),path);
    resource.getParams().addParameters(params);
    UISupport.select(resource);
    if (dialog.getBooleanValue(Form.CREATEREQUEST)) {
      createRequest(resource);
    }
  }
}
