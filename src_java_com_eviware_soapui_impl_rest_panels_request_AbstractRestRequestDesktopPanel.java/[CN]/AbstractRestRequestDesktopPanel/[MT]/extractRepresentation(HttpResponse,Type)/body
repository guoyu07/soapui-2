{
  RestRepresentation[] representations=getRequest().getRepresentations(type);
  int c=0;
  for (; c < representations.length; c++) {
    if (representations[c].getMediaType().equals(response.getContentType())) {
      List status=representations[c].getStatus();
      if (status == null || !status.contains(response.getStatusCode())) {
        status=status == null ? new ArrayList<Integer>() : new ArrayList<Integer>(status);
        status.add(response.getStatusCode());
        representations[c].setStatus(status);
      }
      break;
    }
  }
  if (c == representations.length) {
    RestRepresentation representation=getRequest().addNewRepresentation(type);
    representation.setMediaType(response.getContentType());
    representation.setStatus(Arrays.asList(response.getStatusCode()));
  }
}
