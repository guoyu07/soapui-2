{
  StringBuffer query=new StringBuffer();
  for (int c=0; c < params.getPropertyCount(); c++) {
    RestParamProperty param=params.getPropertyAt(c);
    String value=PropertyExpansionUtils.expandProperties(context,param.getValue());
    if (value != null && !param.isDisableUrlEncoding())     value=URLEncoder.encode(value);
    if (!StringUtils.hasContent(value) && !param.getRequired())     continue;
switch (param.getStyle()) {
case QUERY:
      if (query.length() > 0)       query.append('&');
    query.append(URLEncoder.encode(param.getName()));
  query.append('=');
if (StringUtils.hasContent(value)) query.append(value);
break;
case TEMPLATE:
path=path.replaceAll("\\{" + param.getName() + "\\}",value);
break;
case MATRIX:
if (param.getType().equals(XmlBoolean.type.getName())) {
if (value.toUpperCase().equals("TRUE") || value.equals("1")) {
path+=";" + param.getName();
}
}
 else {
path+=";" + param.getName();
if (StringUtils.hasContent(value)) {
path+="=" + value;
}
}
case PLAIN:
break;
}
}
if (query.length() > 0) path+="?" + query.toString();
return path;
}
