{
  String content=response == null ? null : response.getContentAsString();
  if (!StringUtils.hasContent(content))   return "<xml/>";
  try {
    Tidy tidy=new Tidy();
    tidy.setXmlOut(true);
    tidy.setShowWarnings(false);
    tidy.setErrout(new PrintWriter(new StringWriter()));
    tidy.setNumEntities(true);
    tidy.setQuoteNbsp(true);
    Document document=tidy.parseDOM(new ByteArrayInputStream(content.getBytes()),null);
    StringWriter writer=new StringWriter();
    XmlUtils.serializePretty(document,writer);
    return writer.toString();
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
  return null;
}
