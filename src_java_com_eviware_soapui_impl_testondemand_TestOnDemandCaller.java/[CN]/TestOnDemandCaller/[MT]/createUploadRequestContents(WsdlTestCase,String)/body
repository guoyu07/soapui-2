{
  BASE64Encoder encoder=new BASE64Encoder();
  String encodedTestSuiteName=encoder.encode(testCase.getTestSuite().getName().getBytes());
  String encodedTestCaseName=encoder.encode(testCase.getName().getBytes());
  String projectFilePath=testCase.getTestSuite().getProject().getPath();
  byte[] projectFileData=getBytes(projectFilePath);
  byte[] zipedProjectFileData=zipBytes(testCase.getTestSuite().getProject().getName(),projectFileData);
  String encodedZipedProjectFile=encoder.encode(zipedProjectFileData);
  String projectPassword=testCase.getTestSuite().getProject().getShadowPassword();
  String encodedProjectPassword=encoder.encode(Strings.nullToEmpty(projectPassword).getBytes());
  String keystoreFilePath=SoapUI.getSettings().getString(SSLSettings.KEYSTORE,"");
  byte[] keystoreFileData=getBytes(keystoreFilePath);
  String encodedKeystoreFile=encoder.encode(keystoreFileData);
  String encodedPassword=encoder.encode(SoapUI.getSettings().getString(SSLSettings.KEYSTORE_PASSWORD,"").getBytes());
  return "<Request api_version=\"2\"><Header><UserAgent>" + USER_AGENT + "</UserAgent></Header><Body><Command><Name>TestOnDemand</Name><Parameters>test_location="+ locationCode+ "</Parameters></Command><Txn><TestSuite enctype=\"base64\">"+ encodedTestSuiteName+ "</TestSuite><TestCase enctype=\"base64\">"+ encodedTestCaseName+ "</TestCase><Content enctype=\"base64\" type=\"application/zip\">"+ encodedZipedProjectFile+ "</Content><Password enctype=\"base64\"> "+ encodedProjectPassword+ " </Password></Txn><Keystore><File enctype=\"base64\">"+ encodedKeystoreFile+ "</File><Password enctype=\"base64\">"+ encodedPassword+ "</Password> </Keystore></Body></Request>";
}
