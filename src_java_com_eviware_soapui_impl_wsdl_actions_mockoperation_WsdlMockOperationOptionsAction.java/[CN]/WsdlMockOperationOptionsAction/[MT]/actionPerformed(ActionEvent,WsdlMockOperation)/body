{
  if (mockOperation.getOperation() == null) {
    UISupport.showErrorMessage("Missing operation for this mock response");
    return;
  }
  if (dialog == null) {
    DefaultActionList actions=new DefaultActionList();
    defineNamespacesAction=new DefineNamespacesAction(mockOperation);
    actions.addAction(defineNamespacesAction);
    dialog=ADialogBuilder.buildDialog(Form.class,actions);
    dialog.getFormField(Form.DISPATCH_STYLE).addFormFieldListener(new XFormFieldListener(){
      public void valueChanged(      XFormField sourceField,      String newValue,      String oldValue){
        boolean enabled=newValue.equals("XPATH") || newValue.equals("SCRIPT");
        enableXPathFields(enabled);
        defineNamespacesAction.setEnabled(enabled);
      }
    }
);
    dialog.getFormField(Form.INTERFACE).addFormFieldListener(new XFormFieldListener(){
      public void valueChanged(      XFormField sourceField,      String newValue,      String oldValue){
        WsdlInterface iface=(WsdlInterface)project.getInterfaceByName(newValue);
        dialog.setOptions(Form.OPERATION,new ModelItemNames<Operation>(iface.getOperationList()).getNames());
      }
    }
);
  }
  List<Interface> interfaces=new ArrayList<Interface>();
  for (int c=0; c < project.getInterfaceCount(); c++) {
    AbstractInterface<?> iface=project.getInterfaceAt(c);
    if (iface.getInterfaceType().equals(WsdlInterfaceFactory.WSDL_TYPE) && iface.getOperationCount() > 0)     interfaces.add(iface);
  }
  dialog.setOptions(Form.INTERFACE,new ModelItemNames<Interface>(interfaces).getNames());
  dialog.setOptions(Form.OPERATION,new ModelItemNames<Operation>(interfaces.get(0).getOperationList()).getNames());
  dialog.setValue(Form.INTERFACE,mockOperation.getOperation().getInterface().getName());
  dialog.setValue(Form.OPERATION,mockOperation.getOperation().getName());
  dialog.setOptions(Form.DEFAULT_RESPONSE,new ModelItemNames<MockResponse>(mockOperation.getMockResponses()).getNames());
  dialog.setValue(Form.DISPATCH_STYLE,mockOperation.getDispatchStyle().toString());
  dialog.setValue(Form.DISPATCH_PATH,mockOperation.getDispatchPath());
  dialog.setValue(Form.DEFAULT_RESPONSE,mockOperation.getDefaultResponse());
  enableXPathFields(dialog.getValue(Form.DISPATCH_STYLE).equals("XPATH") || dialog.getValue(Form.DISPATCH_STYLE).equals("SCRIPT"));
  if (dialog.show()) {
    mockOperation.setDispatchStyle(DispatchStyleConfig.Enum.forString(dialog.getValue(Form.DISPATCH_STYLE)));
    mockOperation.setDispatchPath(dialog.getValue(Form.DISPATCH_PATH));
    mockOperation.setDefaultResponse(dialog.getValue(Form.DEFAULT_RESPONSE));
    WsdlInterface iface=(WsdlInterface)project.getInterfaceByName(dialog.getValue(Form.INTERFACE));
    WsdlOperation operation=iface.getOperationByName(dialog.getValue(Form.OPERATION));
    if (operation != mockOperation.getOperation())     mockOperation.setOperation(operation);
  }
}
