{
  try {
    XmlObject xmlObject=request.getRequestXmlObject();
    Map<String,XmlObject[]> nodesCache=new HashMap<String,XmlObject[]>();
    for (    Query query : getQueries()) {
      if (query.isDisabled())       continue;
      String path=PropertyExpansionUtils.expandProperties(request.getContext(),query.getQuery());
      XmlObject[] nodes=nodesCache.containsKey(path) ? nodesCache.get(path) : xmlObject.selectPath(path);
      if (nodes != null && nodes.length > 0) {
        String value=PropertyExpansionUtils.expandProperties(request.getContext(),query.getMatch());
        if (value.equals(XmlUtils.getNodeValue(nodes[0].getDomNode()))) {
          return getMockOperation().getMockResponseByName(query.getResponse());
        }
      }
      nodesCache.put(path,nodes);
    }
    return null;
  }
 catch (  XmlException e) {
    throw new DispatchException(e);
  }
}
