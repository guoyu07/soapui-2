{
  monitorEngine.stop();
  if (addedEndpoints != null) {
    for (    Interface iface : addedEndpoints.keySet())     iface.removeEndpoint(addedEndpoints.get(iface));
    addedEndpoints.clear();
  }
  stopButton.setEnabled(false);
  startButton.setEnabled(true);
  optionsButton.setEnabled(true);
  progressBar.setIndeterminate(false);
  infoLabel.setText("Stopped");
  if (setAsProxy) {
    SoapUI.getSettings().setString(ProxySettings.HOST,oldProxyHost);
    SoapUI.getSettings().setString(ProxySettings.PORT,oldProxyPort);
    SoapUI.getSettings().setBoolean(ProxySettings.ENABLE_PROXY,oldProxyEnabled);
    ProxyUtils.setProxyEnabled(oldProxyEnabled);
    JButton applyProxyButton=(JButton)SoapUI.getApplyProxyButton();
    if (applyProxyButton != null) {
      if (oldProxyEnabled) {
        applyProxyButton.setIcon(UISupport.createImageIcon(SoapUI.PROXY_ENABLED_ICON));
      }
 else {
        applyProxyButton.setIcon(UISupport.createImageIcon(SoapUI.PROXY_DISABLED_ICON));
      }
    }
  }
}
