{
  if (getLogListModel().getSize() == 0)   return;
  if (testCase.getDiscardOkResults()) {
    UISupport.showInfoMessage("Ok Results have been discarded");
    return;
  }
  if (addDialog == null) {
    addDialog=ADialogBuilder.buildDialog(this.getClass());
  }
  String[] testSuiteNames=ModelSupport.getNames(new String[]{CREATE_NEW_OPTION},testCase.getTestSuite().getProject().getMockServiceList());
  addDialog.setOptions(MOCKSERVICE,testSuiteNames);
  if (addDialog.show()) {
    String targetMockServiceName=addDialog.getValue(MOCKSERVICE);
    WsdlMockService mockService=testCase.getTestSuite().getProject().getMockServiceByName(targetMockServiceName);
    if (mockService == null) {
      targetMockServiceName=ModelSupport.promptForUniqueName("MockService",testCase.getTestSuite().getProject(),"");
      if (targetMockServiceName == null)       return;
      mockService=testCase.getTestSuite().getProject().addNewMockService(targetMockServiceName);
    }
    int cnt=0;
    MessageExchangeTestStepResult result=null;
    for (int c=0; c < getLogListModel().getSize(); c++) {
      Object obj=getLogListModel().getResultAt(c);
      if (result != obj && obj instanceof MessageExchangeTestStepResult) {
        result=(MessageExchangeTestStepResult)obj;
        for (        MessageExchange me : result.getMessageExchanges()) {
          if (me.isDiscarded())           continue;
          WsdlMockOperation mockOperation=mockService.getMockOperation(me.getOperation());
          if (mockOperation == null)           mockOperation=mockService.addNewMockOperation((WsdlOperation)me.getOperation());
          WsdlMockResponse mockResponse=mockOperation.addNewMockResponse("Recorded Test Response " + (++cnt),false);
          mockResponse.setResponseContent(me.getResponseContent());
          Attachment[] requestAttachments=me.getResponseAttachments();
          if (requestAttachments != null) {
            for (            Attachment attachment : requestAttachments) {
              mockResponse.addAttachment(attachment);
            }
          }
        }
      }
    }
    if (cnt == 0) {
      UISupport.showInfoMessage("No response messages found");
    }
 else {
      UISupport.showInfoMessage("Added " + cnt + " MockResponses to MockService");
      if (addDialog.getBooleanValue(OPENEDITOR))       UISupport.selectAndShow(mockService);
    }
  }
}
