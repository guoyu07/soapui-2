{
  HashMap<String,Object> parameters=new HashMap<String,Object>();
  try {
    scriptEngine.setScript(script);
    scriptEngine.setVariable("parameters",parameters);
    scriptEngine.setVariable("log",SoapUI.log);
    scriptEngine.setVariable("context",context);
    scriptEngine.run();
    for (    String name : propertyNames) {
      TestProperty propertyValue=propertyMap.get(name);
      if (parameters.containsKey(name)) {
        addArgument(parameters.get(name));
      }
 else {
        addArgument(PropertyExpander.expandProperties(context,propertyValue.getValue()));
      }
    }
  }
 catch (  Throwable e) {
    SoapUI.logError(e);
  }
 finally {
    scriptEngine.clearVariables();
  }
}
