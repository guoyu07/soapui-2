{
  amfRequest.setScriptEngine(scriptEngine);
  amfRequest.setAmfCall(PropertyExpander.expandProperties(submitContext,amfCall.getText()));
  amfRequest.setEndpoint(PropertyExpander.expandProperties(submitContext,endpoint.getText()));
  amfRequest.setGroovyScript(groovyEditor.getEditArea().getText());
  amfRequest.setPropertyNames(amfRequestTestStep.getPropertyNames());
  amfRequest.setPropertyMap((HashMap<String,TestProperty>)amfRequestTestStep.getProperties());
  amfRequest.extractProperties(submitContext);
  return amfRequest;
}
