{
  TopicConnectionFactory topcConnectionFactory=null;
  TopicConnection topicConnection=null;
  TopicSession topicSession=null;
  ConnectionFactory connectionFactory=null;
  Connection connection=null;
  Session session=null;
  try {
    String[] parameters=extractEndpointParameters(request);
    String sessionName=getEndpointParameter(parameters,0,null,submitContext);
    String topicNamePublish=getEndpointParameter(parameters,1,Domain.TOPIC,submitContext);
    String queueNameReceive=getEndpointParameter(parameters,2,Domain.QUEUE,submitContext);
    submitContext.setProperty(HERMES_SESSION_NAME,sessionName);
    Hermes hermes=getHermes(sessionName,request);
    topcConnectionFactory=(TopicConnectionFactory)hermes.getConnectionFactory();
    connectionFactory=(ConnectionFactory)hermes.getConnectionFactory();
    topicConnection=topcConnectionFactory.createTopicConnection();
    topicConnection.start();
    connection=connectionFactory.createConnection();
    connection.start();
    topicSession=topicConnection.createTopicSession(false,Session.AUTO_ACKNOWLEDGE);
    session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Topic topicPublish=(Topic)hermes.getDestination(topicNamePublish,Domain.TOPIC);
    Queue queueReceive=(Queue)hermes.getDestination(queueNameReceive,Domain.QUEUE);
    Message messagePublish=messagePublish(submitContext,request,topicSession,hermes,topicPublish);
    MessageConsumer messageConsumer=session.createConsumer(queueReceive);
    return makeResponse(submitContext,request,timeStarted,messagePublish,messageConsumer);
  }
 catch (  JMSException jmse) {
    return errorResponse(submitContext,request,timeStarted,jmse);
  }
catch (  Throwable t) {
    SoapUI.logError(t);
  }
 finally {
    closeSessionAndConnection(topicConnection,topicSession);
    closeSessionAndConnection(connection,session);
  }
  return null;
}
