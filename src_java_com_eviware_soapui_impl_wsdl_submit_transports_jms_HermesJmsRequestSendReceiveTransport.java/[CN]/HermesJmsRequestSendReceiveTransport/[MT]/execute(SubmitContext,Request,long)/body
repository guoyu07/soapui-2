{
  ConnectionFactory connectionFactory=null;
  Connection connection=null;
  Session session=null;
  try {
    String queueNameSend=null;
    String queueNameReceive=null;
    String sessionName=null;
    String[] parameters=request.getEndpoint().substring(request.getEndpoint().indexOf("://") + 3).split("/");
    if (parameters.length == 3) {
      sessionName=PropertyExpander.expandProperties(submitContext,parameters[0]);
      queueNameSend=PropertyExpander.expandProperties(submitContext,parameters[1]).replaceFirst("queue_","");
      queueNameReceive=PropertyExpander.expandProperties(submitContext,parameters[2]).replaceFirst("queue_","");
    }
 else     throw new Exception("bad jms alias!!!!!");
    submitContext.setProperty(HERMES_SESSION_NAME,sessionName);
    Hermes hermes=getHermes(sessionName,request);
    connectionFactory=(javax.jms.ConnectionFactory)hermes.getConnectionFactory();
    connection=connectionFactory.createConnection();
    connection.start();
    session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queueSend=(Queue)hermes.getDestination(queueNameSend,Domain.QUEUE);
    Queue queueReceive=(Queue)hermes.getDestination(queueNameReceive,Domain.QUEUE);
    TextMessage textMessageSend=messageSend(submitContext,request,session,hermes,queueSend);
    MessageConsumer messageConsumer=session.createConsumer(queueReceive);
    return makeResponse(submitContext,request,timeStarted,textMessageSend,messageConsumer);
  }
 catch (  JMSException jmse) {
    return errorResponse(submitContext,request,timeStarted,jmse);
  }
catch (  Throwable t) {
    SoapUI.logError(t);
  }
 finally {
    closeSessionAndConnection(connection,session);
  }
  return null;
}
