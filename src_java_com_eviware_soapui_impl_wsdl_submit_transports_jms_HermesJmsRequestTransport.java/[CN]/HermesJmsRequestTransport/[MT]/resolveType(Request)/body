{
  int ix=request.getEndpoint().indexOf("://");
  if (ix == -1)   throw new MissingTransportException("Missing protocol in endpoint [" + request.getEndpoint() + "]");
  String[] params=request.getEndpoint().substring(ix + 3).split("/");
  if (params.length == 2) {
    return new HermesJmsRequestSendTransport();
  }
 else   if (params.length == 3 && params[1].equals("-")) {
    return new HermesJmsRequestReceiveTransport();
  }
 else   if (params.length == 3) {
    return new HermesJmsRequestSendReceiveTransport();
  }
 else {
    throw new CannotResolveJmsTypeException("Bad jms alias! /nFor JMS please use this endpont pattern:\nfor sending 'jms://configfilename/queue' \nfor receive  'jms://configfilename/-/topic'\nfor send-receive 'jms://configfilename/queue/topic'");
  }
}
