{
  try {
    this.jmsEndpoint=jmsEndpoint;
    this.hermes=hermes;
    this.clientID=clientID;
    if (createTopicConnection) {
      topicConnectionFactory=(TopicConnectionFactory)hermes.getConnectionFactory();
      topicConnection=(TopicConnection)createConnection(topicConnectionFactory,Domain.TOPIC,clientID,username,password);
      topicConnection.start();
    }
    if (createQueueConnection) {
      queueConnectionFactory=(QueueConnectionFactory)hermes.getConnectionFactory();
      queueConnection=(QueueConnection)createConnection(queueConnectionFactory,Domain.QUEUE,clientID,username,password);
      queueConnection.start();
    }
  }
 catch (  Throwable t) {
    SoapUI.logError(t);
    if (topicConnection != null)     topicConnection.close();
    if (queueConnection != null)     queueConnection.close();
    throw new JMSException(t.getMessage());
  }
}
