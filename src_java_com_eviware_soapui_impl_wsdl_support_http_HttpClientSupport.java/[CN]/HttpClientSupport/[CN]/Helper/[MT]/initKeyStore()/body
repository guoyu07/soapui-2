{
  keyStore=KeyStore.getInstance(KeyStore.getDefaultType());
  Settings settings=SoapUI.getSettings();
  String keyStoreUrl=System.getProperty("soapui.ssl.keystore.location",settings.getString(SSLSettings.KEYSTORE,null));
  keyStoreUrl=keyStoreUrl != null ? keyStoreUrl.trim() : "";
  String pass=System.getProperty("soapui.ssl.keystore.password",settings.getString(SSLSettings.KEYSTORE_PASSWORD,""));
  char[] pwd=pass.toCharArray();
  if (keyStoreUrl.trim().length() > 0) {
    File f=new File(keyStoreUrl);
    if (f.exists()) {
      log.info("Initializing KeyStore");
      FileInputStream instream=new FileInputStream(f);
      try {
        keyStore.load(instream,pwd);
      }
  finally {
        try {
          instream.close();
        }
 catch (        Exception ignore) {
        }
      }
    }
  }
  return keyStore;
}
