{
  Iterator<?> iter=freeConnections.iterator();
  while (iter.hasNext()) {
    HttpConnection conn=(HttpConnection)iter.next();
    iter.remove();
    conn.close();
  }
  shutdownCheckedOutConnections(this);
  iter=waitingThreads.iterator();
  while (iter.hasNext()) {
    WaitingThread waiter=(WaitingThread)iter.next();
    iter.remove();
    waiter.interruptedByConnectionPool=true;
    waiter.thread.interrupt();
  }
  mapHosts.clear();
  idleConnectionHandler.removeAll();
}
