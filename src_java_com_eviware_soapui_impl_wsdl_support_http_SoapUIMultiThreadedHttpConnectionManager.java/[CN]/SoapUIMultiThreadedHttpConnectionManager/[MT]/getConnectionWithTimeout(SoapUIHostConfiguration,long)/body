{
  LOG.trace("enter HttpConnectionManager.getConnectionWithTimeout(HostConfiguration, long)");
  if (hostConfiguration == null) {
    throw new IllegalArgumentException("hostConfiguration is null");
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("HttpConnectionManager.getConnection:  config = " + hostConfiguration + ", timeout = "+ timeout);
  }
  final DefaultClientConnection conn=doGetConnection(hostConfiguration,timeout);
  conn.setAttribute(BaseHttpRequestTransport.SOAPUI_SSL_CONFIG,HttpClientSupport.getHttpClient().getParams().getParameter(BaseHttpRequestTransport.SOAPUI_SSL_CONFIG));
  return new HttpConnectionAdapter(conn);
}
