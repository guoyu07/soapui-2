{
  Element wsAddressing=XmlUtils.getFirstChildElementNS(wsamAddressingElm,WsaUtils.WSAM_NAMESPACE,"Addressing");
  Element addressingPolicy=null;
  Policy newPolicy=PolicyDocument.Factory.newInstance().addNewPolicy();
  Addressing newAddressing=null;
  if (wsAddressing != null) {
    newAddressing=newPolicy.addNewAddressing();
    String optional=wsAddressing.getAttributeNS(PolicyUtils.WS_POLICY_NAMESPACE,"Optional");
    if (!StringUtils.isNullOrEmpty(optional) && optional.equals(OptionalType.TRUE.toString())) {
      newAddressing.setOptional(OptionalType.TRUE);
    }
 else {
      newAddressing.setOptional(OptionalType.FALSE);
    }
    addressingPolicy=XmlUtils.getFirstChildElementNS(wsAddressing,PolicyUtils.WS_POLICY_NAMESPACE,"Policy");
    if (addressingPolicy != null) {
      Element exactlyOne=XmlUtils.getFirstChildElementNS(addressingPolicy,PolicyUtils.WS_POLICY_NAMESPACE,"ExactlyOne");
      if (exactlyOne != null) {
        Element all=XmlUtils.getFirstChildElementNS(exactlyOne,PolicyUtils.WS_POLICY_NAMESPACE,"All");
        if (all != null) {
          getAddressingAnonymous(all,newAddressing);
        }
      }
 else {
        getAddressingAnonymous(addressingPolicy,newAddressing);
      }
    }
  }
  return newPolicy;
}
