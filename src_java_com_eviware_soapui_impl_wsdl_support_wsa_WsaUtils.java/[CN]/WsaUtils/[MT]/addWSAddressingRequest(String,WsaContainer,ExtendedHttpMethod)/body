{
  try {
    Element header=addWsAddressingCommon(content,wsaContainer);
    String action=wsaContainer.getWsaConfig().getAction();
    if (SoapUI.getSettings().getBoolean(WsaSettings.USE_DEFAULT_ACTION)) {
      if (action == null || action.isEmpty()) {
        WsdlUtils.createDefaultedAction((WsdlRequest)wsaContainer);
      }
    }
    if (!StringUtils.isNullOrEmpty(action)) {
      header.appendChild(builder.createWsaChildElement("wsa:Action",elm,wsaContainer.getWsaConfig().getAction()));
    }
    String replyTo=wsaContainer.getWsaConfig().getReplyTo();
    if (!StringUtils.isNullOrEmpty(replyTo)) {
      header.appendChild(builder.createWsaAddressChildElement("wsa:ReplyTo",elm,replyTo));
    }
 else     if (operation.isRequestResponse()) {
      if (SoapUI.getSettings().getBoolean(WsaSettings.USE_DEFAULT_REPLYTO)) {
        header.appendChild(builder.createWsaAddressChildElement("wsa:ReplyTo",elm,replyToAnonimus));
      }
    }
    String relatesTo=wsaContainer.getWsaConfig().getRelationshipType();
    String relationshipType=wsaContainer.getWsaConfig().getRelationshipType();
    if (!StringUtils.isNullOrEmpty(relationshipType) && !StringUtils.isNullOrEmpty(relatesTo)) {
      header.appendChild(builder.createRelatesToElement("wsa:RelatesTo",elm,relationshipType,relatesTo));
    }
    String msgId=wsaContainer.getWsaConfig().getMessageID();
    if (!StringUtils.isNullOrEmpty(msgId)) {
      header.appendChild(builder.createWsaChildElement("wsa:MessageID",elm,msgId));
    }
 else     if (operation.isRequestResponse()) {
      header.appendChild(builder.createWsaChildElement("wsa:MessageID",elm,UUID.randomUUID().toString()));
    }
    String to=wsaContainer.getWsaConfig().getTo();
    if (!StringUtils.isNullOrEmpty(to)) {
      header.appendChild(builder.createWsaAddressChildElement("wsa:To",elm,to));
    }
 else     if (operation.isOneWay() || operation.isRequestResponse()) {
      header.appendChild(builder.createWsaAddressChildElement("wsa:To",elm,httpMethod.getURI().toString()));
    }
    content=xmlObject.xmlText();
  }
 catch (  Exception e) {
    SoapUI.logError(e);
  }
  return content;
}
