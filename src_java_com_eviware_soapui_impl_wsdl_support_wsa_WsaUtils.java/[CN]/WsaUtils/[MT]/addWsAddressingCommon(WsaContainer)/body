{
  wsaVersionNameSpace=WS_A_VERSION_200508;
  if (wsaContainer.getWsaConfig().getVersion().equals(WsaVersionTypeConfig.X_200408.toString())) {
    wsaVersionNameSpace=WS_A_VERSION_200408;
  }
  anonymousAddress=wsaVersionNameSpace + "/anonymous";
  relatesToReply=wsaVersionNameSpace + "/reply";
  anonymousType=wsaContainer.getOperation().getAnonymous();
  Element header=(Element)SoapUtils.getHeaderElement(xmlContentObject,soapVersion,true).getDomNode();
  header.setAttribute("xmlns:wsa",wsaVersionNameSpace);
  XmlObject[] envelope=xmlContentObject.selectChildren(soapVersion.getEnvelopeQName());
  envelopeElement=(Element)envelope[0].getDomNode();
  Boolean mustUnderstand=null;
  if (wsaContainer.getWsaConfig().getMustUnderstand().equals(MustUnderstandTypeConfig.FALSE.toString())) {
    mustUnderstand=false;
  }
 else   if (wsaContainer.getWsaConfig().getMustUnderstand().equals(MustUnderstandTypeConfig.TRUE.toString())) {
    mustUnderstand=true;
  }
  builder=new WsaBuilder(wsaVersionNameSpace,mustUnderstand);
  String from=wsaContainer.getWsaConfig().getFrom();
  if (!StringUtils.isNullOrEmpty(from)) {
    header.appendChild(builder.createWsaAddressChildElement("wsa:From",envelopeElement,from));
  }
  if (AnonymousTypeConfig.REQUIRED.toString().equals(anonymousType)) {
    header.appendChild(builder.createWsaAddressChildElement("wsa:FaultTo",envelopeElement,anonymousAddress));
    wsaContainer.getWsaConfig().setFaultTo(anonymousAddress);
  }
 else {
    String faultTo=wsaContainer.getWsaConfig().getFaultTo();
    if (!StringUtils.isNullOrEmpty(faultTo)) {
      header.appendChild(builder.createWsaAddressChildElement("wsa:FaultTo",envelopeElement,faultTo));
    }
  }
  return header;
}
