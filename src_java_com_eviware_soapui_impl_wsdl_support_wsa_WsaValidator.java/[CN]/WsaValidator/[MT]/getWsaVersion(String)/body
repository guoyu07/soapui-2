{
  SoapVersion soapVersion=messageExchange.getOperation().getInterface().getSoapVersion();
  XmlObject xmlObject=XmlObject.Factory.parse(content);
  XmlObject[] envS=xmlObject.selectChildren(soapVersion.getEnvelopeQName());
  Element envelope=(Element)envS[0].getDomNode();
  header=(Element)SoapUtils.getHeaderElement(xmlObject,soapVersion,true).getDomNode();
  if (!header.hasChildNodes()) {
    throw new AssertionException(new AssertionError("WS-A not enabled"));
  }
  String wsaNameSpace=header.getAttribute("xmlns:wsa");
  if (wsaNameSpace == null || wsaNameSpace.length() == 0) {
    wsaNameSpace=envelope.getAttribute("xmlns:wsa");
    if (wsaNameSpace == null || wsaNameSpace.length() == 0) {
      throw new AssertionException(new AssertionError("WS-A version is missing."));
    }
  }
  if (wsaNameSpace.equals(WsaUtils.WS_A_VERSION_200508)) {
    wsaVersionNameSpace=WsaUtils.WS_A_VERSION_200508;
  }
 else   if (wsaNameSpace.equals(WsaUtils.WS_A_VERSION_200408)) {
    wsaVersionNameSpace=WsaUtils.WS_A_VERSION_200408;
  }
 else {
    throw new AssertionException(new AssertionError("WS-A version is wrong"));
  }
}
