{
  String content=messageExchange.getResponseContent();
  validateWsAddressingCommon(content);
  Element relatesToNode=XmlUtils.getFirstChildElementNS(header,wsaVersionNameSpace,"RelatesTo");
  if (relatesToNode == null) {
    throw new AssertionException(new AssertionError("WS-A RelatesTo property is not specified"));
  }
  String relationshipType=relatesToNode.getAttribute("RelationshipType");
  if (StringUtils.isNullOrEmpty(relationshipType)) {
    throw new AssertionException(new AssertionError("WS-A RelationshipType is not specified"));
  }
  Element relatesToAddressNode=XmlUtils.getFirstChildElementNS(relatesToNode,wsaVersionNameSpace,"Address");
  if (relatesToAddressNode == null) {
    throw new AssertionException(new AssertionError("WS-A RelatesTo Address property is not specified"));
  }
  String relatesToAddressesValue=XmlUtils.getElementText(relatesToAddressNode);
  if (StringUtils.isNullOrEmpty(relatesToAddressesValue)) {
    throw new AssertionException(new AssertionError("WS-A RelatesTo Address property is empty"));
  }
  Element replyToNode=XmlUtils.getFirstChildElementNS(header,wsaVersionNameSpace,"ReplyTo");
  if (replyToNode != null) {
    Element addressNode=XmlUtils.getFirstChildElementNS(replyToNode,wsaVersionNameSpace,"Address");
    if (addressNode != null) {
      String replyToAddressValue=XmlUtils.getElementText(addressNode);
      if (!StringUtils.isNullOrEmpty(replyToAddressValue)) {
        if (AnonymousTypeConfig.PROHIBITED.toString().equals(((WsdlMessageExchange)messageExchange).getOperation().getAnonymous()) && WsaUtils.isAnonymousAddress(replyToAddressValue)) {
          throw new AssertionException(new AssertionError("WS-A InvalidAddressingHeader ReplyTo , Anonymous addresses are prohibited"));
        }
 else         if (AnonymousTypeConfig.REQUIRED.toString().equals(((WsdlMessageExchange)messageExchange).getOperation().getAnonymous()) && !WsaUtils.isAnonymousAddress(replyToAddressValue)) {
          throw new AssertionException(new AssertionError("WS-A InvalidAddressingHeader ReplyTo , Anonymous addresses are required"));
        }
      }
    }
  }
}
