{
  ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
  Thread.currentThread().setContextClassLoader(SoapUI.class.getClassLoader());
  try {
    log.info("Loading schema types from [" + wsdlUrl + "]");
    ArrayList<XmlObject> schemas=new ArrayList<XmlObject>(getSchemas(wsdlUrl,loader).values());
    return buildSchemaTypes(schemas);
  }
 catch (  Exception e) {
    SoapUI.logError(e);
    throw new SchemaException("Error loading schema types",e);
  }
 finally {
    Thread.currentThread().setContextClassLoader(contextClassLoader);
  }
}
