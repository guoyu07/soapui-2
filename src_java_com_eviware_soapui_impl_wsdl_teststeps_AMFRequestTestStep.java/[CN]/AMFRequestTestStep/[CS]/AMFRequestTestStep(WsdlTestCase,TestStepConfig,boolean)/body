{
  super(testCase,config,true,forLoadTest);
  if (getConfig().getConfig() != null) {
    amfRequestTestStepConfig=(AMFRequestTestStepConfig)getConfig().getConfig().changeType(AMFRequestTestStepConfig.type);
  }
 else {
    amfRequestTestStepConfig=(AMFRequestTestStepConfig)getConfig().addNewConfig().changeType(AMFRequestTestStepConfig.type);
  }
  if (amfRequestTestStepConfig.getProperties() == null)   amfRequestTestStepConfig.addNewProperties();
  amfRequest=new AMFRequest(this);
  propertyHolderSupport=new XmlBeansPropertiesTestPropertyHolder(this,amfRequestTestStepConfig.getProperties());
  initAssertions();
  amfRequest.initIcons();
  this.script=amfRequestTestStepConfig.getGroovyScript();
  this.amfCall=amfRequestTestStepConfig.getAmfCall();
  scriptEngine=SoapUIScriptEngineRegistry.create(this);
  scriptEngine.setScript(getScript());
  if (forLoadTest && !isDisabled())   try {
    scriptEngine.compile();
  }
 catch (  Exception e) {
    SoapUI.logError(e);
  }
}
