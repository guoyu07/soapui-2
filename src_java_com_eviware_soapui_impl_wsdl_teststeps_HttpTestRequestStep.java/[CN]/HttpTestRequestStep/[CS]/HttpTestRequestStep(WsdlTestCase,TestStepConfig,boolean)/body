{
  super(testCase,config,true,forLoadTest);
  if (getConfig().getConfig() != null) {
    httpRequestConfig=RestRequestConverter.updateIfNeeded(getConfig().getConfig());
    getConfig().setConfig(httpRequestConfig);
    httpRequestConfig=(HttpRequestConfig)getConfig().getConfig();
    testRequest=buildTestRequest(forLoadTest);
    testRequest.addPropertyChangeListener(this);
    testRequest.addTestPropertyListener(new InternalTestPropertyListener());
    if (config.isSetName())     testRequest.setName(config.getName());
 else     config.setName(testRequest.getName());
  }
 else {
    httpRequestConfig=(HttpRequestConfig)getConfig().addNewConfig().changeType(HttpRequestConfig.type);
  }
  for (  TestProperty property : testRequest.getProperties().values()) {
    addProperty(new RestTestStepProperty((RestParamProperty)property));
  }
  addProperty(new TestStepBeanProperty("Endpoint",false,testRequest,"endpoint",this));
  addProperty(new TestStepBeanProperty("Username",false,testRequest,"username",this));
  addProperty(new TestStepBeanProperty("Password",false,testRequest,"password",this));
  addProperty(new TestStepBeanProperty("Domain",false,testRequest,"domain",this));
  addProperty(new TestStepBeanProperty("Request",false,testRequest,"requestContent",this){
    @Override public String getDefaultValue(){
      return createDefaultRequestContent();
    }
  }
);
  addProperty(new TestStepBeanProperty(WsdlTestStepWithProperties.RESPONSE_AS_XML,true,testRequest,"responseContentAsXml",this){
    @Override public String getDefaultValue(){
      return createDefaultResponseXmlContent();
    }
  }
);
  addProperty(new TestStepBeanProperty("Response",true,testRequest,"responseContentAsString",this){
    @Override public String getDefaultValue(){
      return createDefaultRawResponseContent();
    }
  }
);
}
