{
  if (panel == null) {
    panel=new JPanel(new BorderLayout());
    form=new SimpleForm();
    form.addSpace(5);
    form.setDefaultTextFieldColumns(50);
    JTextField textField=form.appendTextField(DRIVER_FIELD,"JDBC Driver to use");
    textField.setText(getDriver());
    textField.getDocument().addDocumentListener(new DocumentListenerAdapter(){
      @Override public void update(      Document document){
        driver=form.getComponentValue(DRIVER_FIELD);
        setDriver(driver);
        if (StringUtils.isNullOrEmpty(driver) || StringUtils.isNullOrEmpty(connectionString)) {
          testConnectionButton.setEnabled(false);
        }
 else {
          testConnectionButton.setEnabled(true);
        }
      }
    }
);
    textField=form.appendTextField(CONNSTR_FIELD,"JDBC Driver Connection String");
    textField.setText(getConnectionString());
    textField.getDocument().addDocumentListener(new DocumentListenerAdapter(){
      @Override public void update(      Document document){
        connectionString=form.getComponentValue(CONNSTR_FIELD);
        setConnectionString(connectionString);
        if (StringUtils.isNullOrEmpty(driver) || StringUtils.isNullOrEmpty(connectionString)) {
          testConnectionButton.setEnabled(false);
        }
 else {
          testConnectionButton.setEnabled(true);
        }
      }
    }
);
    testConnectionButton=form.appendButton("TestConnection","Test selected database connection");
    testConnectionButton.setAction(new TestConnectionAction());
    if (StringUtils.isNullOrEmpty(driver) || StringUtils.isNullOrEmpty(connectionString)) {
      testConnectionButton.setEnabled(false);
    }
 else {
      testConnectionButton.setEnabled(true);
    }
    queryArea=JXEditTextArea.createSqlEditor();
    JXEditAreaPopupMenu.add(queryArea);
    queryArea.setText(getQuery());
    JScrollPane scrollPane=new JScrollPane(queryArea);
    scrollPane.setPreferredSize(new Dimension(400,150));
    form.append(QUERY_FIELD,scrollPane);
    queryArea.getDocument().addDocumentListener(new DocumentListenerAdapter(){
      @Override public void update(      Document document){
        query=queryArea.getText();
        setQuery(query);
      }
    }
);
    panel.add(form.getPanel());
  }
  return panel;
}
