{
  DOMSource domSource=new DOMSource(doc);
  TransformerFactory tf=TransformerFactory.newInstance();
  Transformer transformer=tf.newTransformer();
  transformer.setOutputProperty(OutputKeys.METHOD,"xml");
  transformer.setOutputProperty(OutputKeys.ENCODING,"ISO-8859-1");
  transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount","4");
  transformer.setOutputProperty(OutputKeys.INDENT,"yes");
  java.io.StringWriter sw=new java.io.StringWriter();
  StreamResult sr=new StreamResult(sw);
  transformer.transform(domSource,sr);
  return sw.toString();
}
