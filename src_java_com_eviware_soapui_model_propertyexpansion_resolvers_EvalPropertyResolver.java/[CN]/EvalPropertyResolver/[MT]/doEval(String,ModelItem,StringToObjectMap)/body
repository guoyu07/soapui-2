{
  String engineId=SoapUIScriptEngineRegistry.getScriptEngineId(modelItem);
synchronized (this) {
    if (!scriptEnginePools.containsKey(engineId))     scriptEnginePools.put(engineId,new ScriptEnginePool(engineId));
  }
  ScriptEnginePool scriptEnginePool=scriptEnginePools.get(engineId);
  SoapUIScriptEngine scriptEngine=scriptEnginePool.getScriptEngine();
  try {
    scriptEngine.setScript(name);
    for (    String key : objects.keySet())     scriptEngine.setVariable(key,objects.get(key));
    Object result=scriptEngine.run();
    return result == null ? null : result.toString();
  }
 catch (  Throwable e) {
    log.error("Error evaluating script",e);
    return e.getMessage();
  }
 finally {
    scriptEngine.clearVariables();
    scriptEnginePool.returnScriptEngine(scriptEngine);
  }
}
