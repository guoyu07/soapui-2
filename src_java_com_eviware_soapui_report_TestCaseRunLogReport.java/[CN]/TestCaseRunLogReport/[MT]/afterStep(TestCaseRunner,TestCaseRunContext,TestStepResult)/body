{
  TestCaseRunLogTestStep testCaseRunLogTestStep=testCaseRunLog.addNewTestCaseRunLogTestStep();
  testCaseRunLogTestStep.setName(result.getTestStep().getName());
  testCaseRunLogTestStep.setTimeTaken(Long.toString(result.getTimeTaken()));
  testCaseRunLogTestStep.setStatus(result.getStatus().toString());
  testCaseRunLogTestStep.setMessageArray(result.getMessages());
  testCaseRunLogTestStep.setTimestamp(SoapUIMetrics.formatTimestamp(result.getTimeStamp()));
  ExtendedHttpMethod httpMethod=(ExtendedHttpMethod)runContext.getProperty(BaseHttpRequestTransport.HTTP_METHOD);
  if (httpMethod != null && result.getTestStep() instanceof HttpRequestTestStep) {
    testCaseRunLogTestStep.setEndpoint(httpMethod.getURI().toString());
    SoapUIMetrics metrics=httpMethod.getMetrics();
    testCaseRunLogTestStep.setTimestamp(metrics.getFormattedTimeStamp());
    testCaseRunLogTestStep.setHttpStatus(String.valueOf(metrics.getHttpStatus()));
    testCaseRunLogTestStep.setContentLength(String.valueOf(metrics.getContentLength()));
    testCaseRunLogTestStep.setReadTime(String.valueOf(metrics.getReadTimer().getDuration()));
    testCaseRunLogTestStep.setTotalTime(String.valueOf(metrics.getTotalTimer().getDuration()));
    testCaseRunLogTestStep.setDnsTime(String.valueOf(metrics.getDNSTimer().getDuration()));
    testCaseRunLogTestStep.setConnectTime(String.valueOf(metrics.getConnectTimer().getDuration()));
    testCaseRunLogTestStep.setTimeToFirstByte(String.valueOf(metrics.getTimeToFirstByteTimer().getDuration()));
    testCaseRunLogTestStep.setHttpMethod(metrics.getHttpMethod());
    testCaseRunLogTestStep.setIpAddress(metrics.getIpAddress());
  }
  Throwable error=result.getError();
  if (error != null) {
    testCaseRunLogTestStep.setErrorMessage(error.getMessage());
  }
}
