{
  WsdlProject project=new WsdlProject("src" + File.separatorChar + "test-resources"+ File.separatorChar+ "sample-soapui-project.xml");
  TestSuite testSuite=project.getTestSuiteByName("Test Suite");
  List<SecurityCheck> secCheckList=new ArrayList();
  SecurityCheckConfig asdf=SecurityCheckConfig.Factory.newInstance();
  asdf.setType(GroovySecurityCheck.TYPE);
  GroovySecurityCheck gsc=new GroovySecurityCheck(asdf,null,null);
  gsc.setScript("println testStep.name");
  SecurityCheckConfig exposureConfig=SecurityCheckRegistry.getInstance().getFactory(ParameterExposureCheck.TYPE).createNewSecurityCheck("Test");
  ParameterExposureCheck exposureCheck=(ParameterExposureCheck)SecurityCheckRegistry.getInstance().getFactory(ParameterExposureCheck.TYPE).buildSecurityCheck(exposureConfig);
  secCheckList.add(exposureCheck);
  securityChecksMap.put("HTTP Test Request",secCheckList);
  testCase=(WsdlTestCase)testSuite.getTestCaseByName("Test Conversions");
  WsdlInterface iface=(WsdlInterface)project.getInterfaceAt(0);
  mockService=(WsdlMockService)project.addNewMockService("MockService 1");
  mockService.setPort(9081);
  mockService.setPath("/testmock");
  WsdlOperation operation=(WsdlOperation)iface.getOperationAt(0);
  WsdlMockOperation mockOperation=(WsdlMockOperation)mockService.addNewMockOperation(operation);
  WsdlMockResponse mockResponse=mockOperation.addNewMockResponse("Test Response",true);
  mockResponse.setResponseContent("Tjohoo!");
  mockService.start();
  String endpoint="http://localhost:9081//testmock";
  iface.addEndpoint(endpoint);
  List<TestStep> testStepList=testCase.getTestStepList();
  for (  TestStep testStep : testStepList) {
    if (testStep instanceof WsdlTestRequestStep) {
      ((WsdlTestRequestStep)testStep).getTestRequest().setEndpoint(endpoint);
    }
  }
}
